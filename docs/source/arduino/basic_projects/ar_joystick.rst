.. note::

    こんにちは、SunFounderのRaspberry Pi & Arduino & ESP32愛好家コミュニティへようこそ！Facebook上でRaspberry Pi、Arduino、ESP32についてもっと深く掘り下げ、他の愛好家と交流しましょう。

    **参加する理由は？**

    - **エキスパートサポート**：コミュニティやチームの助けを借りて、販売後の問題や技術的な課題を解決します。
    - **学び＆共有**：ヒントやチュートリアルを交換してスキルを向上させましょう。
    - **独占的なプレビュー**：新製品の発表や先行プレビューに早期アクセスしましょう。
    - **特別割引**：最新製品の独占割引をお楽しみください。
    - **祭りのプロモーションとギフト**：ギフトや祝日のプロモーションに参加しましょう。

    👉 私たちと一緒に探索し、創造する準備はできていますか？[|link_sf_facebook|]をクリックして今すぐ参加しましょう！

.. _ar_joystick:

5.11 ジョイスティックの切り替え
================================
ビデオゲームをよくプレイするなら、ジョイスティックに非常に馴染みがあるでしょう。
キャラクターを動かしたり、画面を回転させたりするのに普通使用されます。

コンピュータが私たちの動作を読み取ることができるジョイスティックの原理は非常にシンプルです。
これは互いに直交する二つのポテンショメーターで構成されていると考えることができます。
これら二つのポテンショメーターは、ジョイスティックの縦と横のアナログ値を測定し、平面直角座標系の値(x,y)を結果として得ます。

このキットのジョイスティックには、押された時にアクティブになるデジタル入力もあります。

**必要な部品**

このプロジェクトには以下のコンポーネントが必要です。

全てのキットを購入することは非常に便利です。こちらがリンクです:

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - 名前
        - このキットのアイテム
        - リンク
    *   - ESP32 Starter Kit
        - 320+
        - |link_esp32_starter_kit|

以下のリンクから個別に購入することもできます。

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - コンポーネントの紹介
        - 購入リンク

    *   - :ref:`cpn_esp32_wroom_32e`
        - |link_esp32_wroom_32e_buy|
    *   - :ref:`cpn_esp32_camera_extension`
        - \-
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_joystick`
        - |link_joystick_buy|

* **利用可能なピン**

    以下はこのプロジェクトでESP32ボードに利用可能なピンのリストです。

    .. list-table::
        :widths: 5 15

        *   - アナログ入力用
            - IO14, IO25, I35, I34, I39, I36
        *   - デジタル入力用
            - IO13, IO12, IO14, IO27, IO26, IO25, IO33, IO15, IO2, IO0, IO4, IO5, IO18, IO19, IO21, IO22, IO23
            
**回路図**

.. image:: ../../img/circuit/circuit_5.11_joystick.png

SW（Z軸）ピンはIO33に接続されており、内蔵4.7Kプルアップ抵抗器があります。そのため、SWボタンが押されていない場合は、高レベルを出力します。ボタンが押された場合は、低レベルを出力します。

ジョイスティックを操作すると、I34とI35の値が変わります。値の範囲は0から4095です。

**配線図**

.. image:: ../../img/wiring/5.11_joystick_bb.png

**コード**

.. note::

    * ``esp32-starter-kit-main\c\codes\5.11_joystick`` のパスの下にある ``5.11_joystick.ino`` ファイルを開いてください。
    * ボード（ESP32 Dev Module）と適切なポートを選択した後、 **Upload** ボタンをクリックします。
    * :ref:`unknown_com_port`
    
    
.. raw:: html
    
    <iframe src=https://create.arduino.cc/editor/sunfounder01/a2065d70-d207-4e51-b03e-ffd2a26597ef/preview?embed style="height:510px;width:100%;margin:10px 0" frameborder=0></iframe>


コードが正常にアップロードされた後、シリアルモニターを開いて、ジョイスティックのx,y,z値を確認してください。

* x軸とy軸の値は0から4095までのアナログ値です。
* Z軸は1または0のデジタル値です（押された時は0です）。
